---
# Reflection of https://docs.alfresco.com/content-services/latest/support/
# TO BE ENRICHED AS RELEASES ARE OUT
patterns:
  ga: &ga_pattern (\.[0-9]+){1,2}
  ga_with_hotfixes: &ga_hotfixes_pattern (\.[0-9]+){0,3}
  development: &development_pattern (\.[0-9]+){0,3}(-A\.?[0-9]+)?
  ga_activemq: &ga_activemq_pattern \.\d+-jre17-rockylinux8
matrix:
  next:
    id: next
    acs: &acs_next_version_spec
      version: ">=26.0.0-0"
      versionFilterKind: regex/semver
      regex: '^(\d+\.\d+\.\d+(-A\.\d+)?)$' # mainly to ignore -Mx
    activemq:
      version: "6.2"
      pattern: *ga_activemq_pattern
    share: *acs_next_version_spec
    search-enterprise:
      version: "5"
      pattern: *development_pattern
    sync:
      version: "5"
      pattern: *development_pattern
    adw:
      version: ">=7.3.0-0"
      versionFilterKind: semver
    adminApp:
      version: ">=10.3.0-0"
      versionFilterKind: semver
    onedrive:
      version: ">=2.1.0-0"
      versionFilterKind: semver
    msteams:
      version: ">=2.1.0-0"
      versionFilterKind: semver
    intelligence:
      version: ">=3.3.0-0"
      versionFilterKind: semver
    trouter: &ats_next_version
      version: ">=4.3.0-0"
      versionFilterKind: semver
    sfs: *ats_next_version
    tengine-aio: &tengines_next_version
      version:  ">=5.3.0-0"
      versionFilterKind: semver
    tengine-misc: *tengines_next_version
    tengine-im: *tengines_next_version
    tengine-lo: *tengines_next_version
    tengine-pdf: *tengines_next_version
    tengine-tika: *tengines_next_version
    audit-storage:
      version: ">=1.3.0-0"
      versionFilterKind: semver

  current:
    id: current
    acs: &acs_ga_version_spec
      # while no GA
      #version:  "~26"
      version: ">=26.0.0-0"
      versionFilterKind: regex/semver
      regex: '^(\d+\.\d+\.\d+(-A\.\d+)?)$' # mainly to ignore -Mx
    activemq:
      version: "6.2"
      pattern: *ga_activemq_pattern
    share: *acs_ga_version_spec
    search: &search_ga_version_spec
      # while no GA
      #version: "~2"
      version: "^2.0.18-A.0"
      versionFilterKind: semver
    insight-zeppelin: *search_ga_version_spec
    search-enterprise: &search_ent_ga_version_spec
      version: "5"
      # while no GA
      #pattern: *ga_hotfixes_pattern
      pattern: *development_pattern
    sync: &sync_ga_version_spec
      version: "~5.3"
      versionFilterKind: semver
    adw: &adw_ga_version_spec
      # while no GA
      #version: ">=7.3"
      version: "^7.3.0-0"
      versionFilterKind: semver
    adminApp: &acc_ga_version_spec
      # while no GA
      #version: ">=10.3"
      version: "^10.3.0-0"
      versionFilterKind: semver
    onedrive: &onedrive_ga_version_spec
      # while no GA
      #version: "~2"
      version: "^2.1.0-A.0"
      versionFilterKind: semver
    msteams: &msteams_ga_version_spec
      # while no GA
      #version: "~2"
      version: "^2.1.0-A.0"
      versionFilterKind: semver
    intelligence: &ais_ga_version_spec
      # while no GA
      #version: "~3"
      version: "^3.3.2-A.0"
      versionFilterKind: semver
    trouter: &ats_ga_version
      # while no GA
      #version: "~4"
      version: "^4.3.2-A.0"
      versionFilterKind: semver
    sfs: *ats_ga_version
    tengine-aio: &tengines_ga_version_spec
      # while no GA
      #version: "~5"
      version: "^5.3.2-A.0"
      versionFilterKind: semver
    tengine-misc: *tengines_ga_version_spec
    tengine-im: *tengines_ga_version_spec
    tengine-lo: *tengines_ga_version_spec
    tengine-pdf: *tengines_ga_version_spec
    tengine-tika: *tengines_ga_version_spec
    activiti:
      version: &activiti_ga_version "25"
      pattern: *ga_pattern
    activiti-admin:
      version: *activiti_ga_version
      pattern: *ga_pattern
    audit-storage: &audit_storage_ga_version_spec
      # while no GA
      #version: "~1"
      version: "^1.3.0-A.0"
      versionFilterKind: semver

  25.N:
    id: 25n
    acs: &acs_25_ga_version_spec
      version:  "~25"
      versionFilterKind: semver
    activemq: &activemq5_ga_version_spec
      version: "5.19"
      pattern: *ga_activemq_pattern
    share: *acs_25_ga_version_spec
    search: *search_ga_version_spec
    insight-zeppelin: *search_ga_version_spec
    search-enterprise: &search_ent_ga_version_spec
      version: "5"
      pattern: *ga_hotfixes_pattern
    sync: &sync_25_ga_version_spec
      version: "~5"
      versionFilterKind: semver
    adw:
      <<: *adw_ga_version_spec
      version: ">=7.2"
    adminApp:
      <<: *acc_ga_version_spec
      version: ">=10.2"
    onedrive: *onedrive_ga_version_spec
    msteams: *msteams_ga_version_spec
    intelligence: &ais_ga_version_spec
      version: "~3"
      versionFilterKind: semver
    trouter: *ats_ga_version
    sfs: *ats_ga_version
    tengine-aio: *tengines_ga_version_spec
    tengine-misc: *tengines_ga_version_spec
    tengine-im: *tengines_ga_version_spec
    tengine-lo: *tengines_ga_version_spec
    tengine-pdf: *tengines_ga_version_spec
    tengine-tika: *tengines_ga_version_spec
    activiti:
      version: &activiti_ga_version "25"
      pattern: *ga_pattern
    activiti-admin:
      version: *activiti_ga_version
      pattern: *ga_pattern
    audit-storage: *audit_storage_ga_version_spec

  23.N:
    id: 23n
    acs: &acs_23_version_spec
      version: "~23"
      versionFilterKind: semver
    activemq: *activemq5_ga_version_spec
    share: *acs_23_version_spec
    search: *search_ga_version_spec
    insight-zeppelin: *search_ga_version_spec
    search-enterprise: *search_ent_ga_version_spec
    sync: *sync_25_ga_version_spec
    adw:
      <<: *adw_ga_version_spec
      version: "~7.2"
    adminApp:
      <<: *acc_ga_version_spec
      version: "~10.2"
    onedrive: *onedrive_ga_version_spec
    msteams: *msteams_ga_version_spec
    intelligence: *ais_ga_version_spec
    trouter: *ats_ga_version
    sfs: *ats_ga_version
    tengine-aio: *tengines_ga_version_spec
    tengine-misc: *tengines_ga_version_spec
    tengine-im: *tengines_ga_version_spec
    tengine-lo: *tengines_ga_version_spec
    tengine-pdf: *tengines_ga_version_spec
    tengine-tika: *tengines_ga_version_spec
    activiti:
      version: &activiti_24_version "24"
      pattern: *ga_pattern
    activiti-admin:
      version: *activiti_24_version
      pattern: *ga_pattern
    audit-storage: *audit_storage_ga_version_spec

  7.4.N:
    id: 74n
    acs: &acs_74_version_spec
      version: "7.4"
      pattern: *ga_hotfixes_pattern
    activemq:
      version: "5.17"
      pattern: *ga_activemq_pattern
    share: *acs_74_version_spec
    search: *search_ga_version_spec
    insight-zeppelin: *search_ga_version_spec
    search-enterprise:
      version: "3.3"
      pattern: *ga_hotfixes_pattern
    sync:
      version: "3.11"
      pattern: *ga_hotfixes_pattern
    adw:
      version: "5.0"
      pattern: *ga_pattern
    adminApp:
      version: "8.3"
      pattern: *ga_pattern
    onedrive: *onedrive_ga_version_spec
    msteams: *msteams_ga_version_spec
    intelligence: *ais_ga_version_spec
    trouter: *ats_ga_version
    sfs: *ats_ga_version
    tengine-aio: *tengines_ga_version_spec
    tengine-misc: *tengines_ga_version_spec
    tengine-im: *tengines_ga_version_spec
    tengine-lo: *tengines_ga_version_spec
    tengine-pdf: *tengines_ga_version_spec
    tengine-tika: *tengines_ga_version_spec
    activiti: &activiti_2_4_version_spec
      version: "2.4"
      pattern: *ga_hotfixes_pattern
    activiti-admin: *activiti_2_4_version_spec

  community:
    id: com
    acs:
      <<: *acs_ga_version_spec
      image: docker.io/alfresco/alfresco-content-repository-community
    activemq:
      <<: *activemq5_ga_version_spec
      image: docker.io/alfresco/alfresco-activemq
    share:
      <<: *acs_ga_version_spec
      image: docker.io/alfresco/alfresco-share
    search:
      <<: *search_ga_version_spec
      image: docker.io/alfresco/alfresco-search-services
    adminApp: *acc_ga_version_spec
    tengine-aio: *tengines_ga_version_spec
    aca:
      # while no GA
      #<<: *adw_ga_version_spec
      version: "develop-"
      pattern: "[0-9]+"
